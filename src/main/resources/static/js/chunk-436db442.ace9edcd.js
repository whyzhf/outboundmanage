(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-436db442"],{"5a9e":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"multipleTable",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(220, 237, 255,.8)",data:e.tableData,"tooltip-effect":"dark",border:"","cell-style":e.getCellStyle,"header-cell-style":e.getHeaderStyle},on:{"selection-change":e.handleSelectionChange}},["/manage/taskcenter"===e.$route.path?r("el-table-column",{attrs:{width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-radio",{staticClass:"radio",attrs:{label:t.$index},nativeOn:{change:function(r){return e.getRadioRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,3510363555)}):e._e(),e.isSelectShow?r("el-table-column",{staticClass:"mulit-select",attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.thList,function(e,t){return r("el-table-column",{key:t,staticStyle:{"font-size":"16px"},attrs:{label:e.ch,prop:e.en}})}),e.isShow?r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{class:0==t.row.type?"normal":"destroy",domProps:{textContent:e._s(0==t.row.type?"正常":"故障")}}),0==t.row.type?r("span",{class:1===t.row.status?"normal":"useing",domProps:{textContent:e._s(1==t.row.status?"(未使用)":"(使用中)")}}):e._e()]}}],null,!1,1142099066)}):e._e(),e.isVisible?r("el-table-column",{attrs:{label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{class:0==t.row.status?"checking":1==t.row.status?"normal":2==t.row.status?"destroy":3==t.row.status?"working":"useing",domProps:{textContent:e._s(0==t.row.status?"审核中":1==t.row.status?"审核通过":2==t.row.status?"审核未通过":3==t.row.status?"执行中":"已完成")}})]}}],null,!1,1272741679)}):e._e(),e.isOperateShow?r("el-table-column",{attrs:{label:"/manage/taskverify"===e.$route.path?"审核":"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"row-operate"},[e._t("operate",null,null,t)],2)]}}],null,!0)}):e._e()],2)],1)},s=[],i=(r("8e6e"),r("456d"),r("ac6a"),r("bd86")),n=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c={name:"dataTable",props:{tableData:{type:Array,required:!0},thList:{type:Array,required:!0},isLoading:{type:Boolean}},data:function(){return{isShow:!1,isVisible:!1,isSelectShow:!1,isOperateShow:!1,radio:[]}},mounted:function(){switch(this.$route.path){case"/manage/equipmentmanage":case"/manage/carmanage":this.isShow=!0;break;default:this.isShow=!1;break}switch(this.$route.path){case"/manage/taskmanage":case"/manage/taskcenter":case"/manage/taskverify":case"/manage/currenttask":this.isVisible=!0;break;default:this.isVisible=!1;break}switch(this.$route.path){case"/manage/historytask":case"/manage/taskverify":case"/manage/taskcenter":case"/manage/currenttask":this.isSelectShow=!1;break;default:this.isSelectShow=!0;break}switch(this.$route.path){case"/manage/taskcenter":case"/manage/currenttask":case"/manage/historytask":this.isOperateShow=!1;break;default:this.isOperateShow=!0;break}},methods:l({},Object(n["c"])(["updateMultipleSelection"]),{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.updateMultipleSelection(e)},getRadioRow:function(e){this.updateMultipleSelection(e)},getCellStyle:function(){return"height:50px;textAlign:center;fontSize:18px;color:rgba(102,102,102,1);fontWeight:400"},getHeaderStyle:function(){return"background:rgba(220,237,255,1);fontWeight:bold;height:50px;textAlign:center;fontSize:18px;color:rgba(102,102,102,1)"}})},u=c,d=(r("7c61"),r("2877")),p=Object(d["a"])(u,a,s,!1,null,null,null);t["a"]=p.exports},"7c61":function(e,t,r){"use strict";var a=r("dca4"),s=r.n(a);s.a},"8a14":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"manage-table-wrap"},[r("div",{staticClass:"task-btn-list"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddForm}},[e._v("新增")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteSelected}},[e._v("删除")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right"},on:{click:e.startTask}},[e._v("开始")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:e.endTask}},[e._v("结束")]),r("el-dialog",{attrs:{title:e.formTitle,width:"25%",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t},opened:e.openForm,close:function(t){return e.closeForm("dialogForm")}}},[r("el-form",{ref:"dialogForm",attrs:{model:e.form,rules:e.rules,labelPosition:"left"}},[r("el-form-item",{attrs:{label:"任务名称",prop:"task","label-width":"100px"}},[r("el-select",{attrs:{"value-key":"name",placeholder:"请选择状态"},model:{value:e.form.task,callback:function(t){e.$set(e.form,"task",t)},expression:"form.task"}},e._l(e.taskList,function(e){return r("el-option",{key:e.type,attrs:{value:e,label:e.name}})}),1)],1),r("el-form-item",{attrs:{label:"押运车辆",prop:"carIds","label-width":"100px"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择车辆"},model:{value:e.form.carIds,callback:function(t){e.$set(e.form,"carIds",t)},expression:"form.carIds"}},e._l(e.carList,function(e){return r("el-option",{key:e.id,attrs:{label:e.card,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"选择路线",prop:"route","label-width":"100px"}},[r("el-select",{attrs:{"value-key":"name",placeholder:"请选择路线"},model:{value:e.form.route,callback:function(t){e.$set(e.form,"route",t)},expression:"form.route"}},e._l(e.routeList,function(e){return r("el-option",{key:e.id,attrs:{value:e,label:e.name}})}),1)],1),r("el-form-item",{attrs:{label:"开始时间",prop:"startTime","label-width":"100px"}},[r("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},on:{change:e.selectTime},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),r("el-form-item",{attrs:{label:"押解干警",prop:"police","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea",disabled:e.isdisabled,placeholder:"请先选择开始时间"},on:{focus:function(t){e.policemanSelect=!0}},model:{value:e.form.police,callback:function(t){e.$set(e.form,"police",t)},expression:"form.police"}})],1),r("el-form-item",{attrs:{label:"被押解人员",prop:"prisoner","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请先选择开始时间",disabled:e.isdisabled},on:{focus:function(t){e.prisonSelect=!0}},model:{value:e.form.prisoner,callback:function(t){e.$set(e.form,"prisoner",t)},expression:"form.prisoner"}})],1),r("el-form-item",{attrs:{label:"任务概述",prop:"describe","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitAddTask("dialogForm")}}},[e._v("确 定")])],1),r("el-dialog",{attrs:{width:"30%",visible:e.policemanSelect,"append-to-body":""},on:{"update:visible":function(t){e.policemanSelect=t},close:function(t){return e.closeSelect("policemanSelect")},open:function(t){return e.openSelect("policemanSelect")}}},[r("div",{staticClass:"select-box"},[r("div",{staticClass:"select-box-left"},[r("div",{staticClass:"select-box-left-title"},[e._v("待选干警")]),r("el-checkbox-group",{on:{change:e.changeSelectPolice},model:{value:e.form.policeIds,callback:function(t){e.$set(e.form,"policeIds",t)},expression:"form.policeIds"}},e._l(e.policeList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:JSON.stringify(t)}},[e._v(e._s(t.name))])}),1)],1),r("div",{staticClass:"select-box-right"},[r("div",{staticClass:"select-box-right-watch"},[r("div",{staticClass:"top-title"},[e._v("待选手表")]),r("el-checkbox-group",{attrs:{max:e.maxNum},model:{value:e.form.watchIds,callback:function(t){e.$set(e.form,"watchIds",t)},expression:"form.watchIds"}},e._l(e.watchList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.card))])}),1)],1),r("div",{staticClass:"select-box-right-handset"},[r("div",{staticClass:"bottom-title"},[e._v("待选遥控器")]),r("el-checkbox-group",{attrs:{max:e.maxNum},model:{value:e.form.handsetIds,callback:function(t){e.$set(e.form,"handsetIds",t)},expression:"form.handsetIds"}},e._l(e.handsetList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.card))])}),1)],1)])]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelSelect("policemanSelect")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.defSelect("policemanSelect")}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{width:"30%",visible:e.prisonSelect,"append-to-body":""},on:{"update:visible":function(t){e.prisonSelect=t},open:function(t){return e.openSelect("prisonSelect")}}},[r("div",{staticClass:"select-box"},[r("div",{staticClass:"select-box-left"},[r("div",{staticClass:"select-box-left-title"},[e._v("待选犯人")]),r("el-checkbox-group",{on:{change:e.changeSelectPrisoner},model:{value:e.form.prisonerIds,callback:function(t){e.$set(e.form,"prisonerIds",t)},expression:"form.prisonerIds"}},e._l(e.prisonList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:JSON.stringify(t)}},[e._v(e._s(t.name))])}),1)],1),r("div",{staticClass:"select-box-right"},[r("div",{staticClass:"select-box-right-foot"},[r("div",{staticClass:"top-title"},[e._v("待选脚扣")]),r("el-checkbox-group",{attrs:{max:e.maxNum2},model:{value:e.form.grapplersIds,callback:function(t){e.$set(e.form,"grapplersIds",t)},expression:"form.grapplersIds"}},e._l(e.footList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.card))])}),1)],1)])]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelSelect("prisonSelect")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.defSelect("prisonSelect")}}},[e._v("确 定")])],1)])],1)],1),r("div",{staticClass:"table-font"},[r("dataTable",{attrs:{tableData:e.tableData,thList:e.thList,isLoading:e.isLoading},scopedSlots:e._u([{key:"operate",fn:function(t){return[r("div",{class:{"grey-class":0!==t.row.status},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("div",{on:{click:function(r){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),r("el-dialog",{attrs:{title:"任务详情",width:"25%",visible:e.isDetail,center:""},on:{"update:visible":function(t){e.isDetail=t}}},[r("el-form",{attrs:{model:e.detailForm,labelPosition:"left",disabled:!0}},[r("el-form-item",{attrs:{label:"任务名称","label-width":"100px"}},[r("el-input",{attrs:{type:"text"},model:{value:e.detailForm.name,callback:function(t){e.$set(e.detailForm,"name",t)},expression:"detailForm.name"}})],1),r("el-form-item",{attrs:{label:"押运车辆","label-width":"100px"}},[r("el-input",{attrs:{type:"text"},model:{value:e.detailForm.car,callback:function(t){e.$set(e.detailForm,"car",t)},expression:"detailForm.car"}})],1),r("el-form-item",{attrs:{label:"选择路线","label-width":"100px"}},[r("el-input",{attrs:{type:"text"},model:{value:e.detailForm.routeName,callback:function(t){e.$set(e.detailForm,"routeName",t)},expression:"detailForm.routeName"}})],1),r("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[r("el-input",{attrs:{type:"text"},model:{value:e.detailForm.startTime,callback:function(t){e.$set(e.detailForm,"startTime",t)},expression:"detailForm.startTime"}})],1),r("el-form-item",{attrs:{label:"押解干警","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea",autosize:"",resize:"none"},model:{value:e.detailForm.police,callback:function(t){e.$set(e.detailForm,"police",t)},expression:"detailForm.police"}})],1),r("el-form-item",{attrs:{label:"被押解人员","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea",autosize:"",resize:"none"},model:{value:e.detailForm.prisoner,callback:function(t){e.$set(e.detailForm,"prisoner",t)},expression:"detailForm.prisoner"}})],1),r("el-form-item",{attrs:{label:"任务概述","label-width":"100px"}},[r("el-input",{attrs:{type:"textarea",autosize:"",resize:"none"},model:{value:e.detailForm.describe,callback:function(t){e.$set(e.detailForm,"describe",t)},expression:"detailForm.describe"}})],1)],1)],1),r("div",{staticClass:"pagination-wrap"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.taskTotal},on:{"current-change":e.numPage,"prev-click":e.prevpage,"next-click":e.nextpage}})],1)],1)},s=[],i=(r("8e6e"),r("456d"),r("ac6a"),r("7f7f"),r("96cf"),r("3b8d")),n=r("bd86"),o=r("2f62"),l=r("5a9e"),c=r("365c");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p={name:"TaskManage",components:{dataTable:l["a"]},data:function(){return{taskList:[{type:0,name:"外出就医"},{type:1,name:"指认现场"},{type:2,name:"出庭作证"},{type:3,name:"投牢"},{type:4,name:"审讯"},{type:5,name:"其他"}],isdisabled:!0,isShow:!0,policemanSelect:!1,prisonSelect:!1,pageNum:1,thList:[{ch:"任务名称",en:"name"},{ch:"开始时间",en:"startTime"},{ch:"结束时间",en:"endTime"},{ch:"出发地",en:"origin"},{ch:"目的地",en:"destination"},{ch:"路线名称",en:"routeName"}],dialogFormVisible:!1,isDetail:!1,formTitle:"",form:{task:{},carIds:[],route:{},startTime:"",police:"",prisoner:"",describe:"",policeIds:[],handsetIds:[],watchIds:[],prisonerIds:[],grapplersIds:[],type:0,name:"",routeId:0,routeName:""},rules:{task:{required:!0,triggre:"blur",type:"object"},carIds:{required:!0},route:{required:!0},startTime:{required:!0},police:{required:!0,message:"此项必填"},prisoner:{required:!0,message:"此项必填"}},detailForm:{},carList:[],routeList:[],watchList:[],handsetList:[],footList:[],policeList:[],prisonList:[],oldWatchIds:[],oldHandsetIds:[],oldPoliceIds:[],oldPrisonerIds:[],oldGrapplersIds:[]}},computed:d({},Object(o["d"])({areaId:function(e){return e.areaId},multipleSelection:function(e){return e.multipleSelection},tableData:function(e){return e.taskManage.tableData},taskTotal:function(e){return e.taskManage.taskTotal},isLoading:function(e){return e.taskManage.isLoading}}),{maxNum:function(){return this.form.policeIds?this.form.policeIds.length:0},maxNum2:function(){return this.form.prisonerIds?this.form.prisonerIds.length:0}}),mounted:function(){var e=this;0===this.areaId?setTimeout(function(){var t=e.areaId;e.getTaskData({areaId:t,pageNum:e.pageNum,pageSize:10})},0):this.getTaskData({areaId:this.areaId,pageNum:this.pageNum,pageSize:10})},methods:d({},Object(o["b"])(["getTaskData","getAddTask","getCarData"]),{changeSelectPolice:function(){var e=this.form.policeIds;this.form.watchIds=e.reduce(function(e,t){var r=JSON.parse(t);return r.equipmentId2&&e.push(r.equipmentId2),e},[]),this.form.handsetIds=e.reduce(function(e,t){var r=JSON.parse(t);return r.equipmentId&&e.push(r.equipmentId),e},[])},changeSelectPrisoner:function(){console.log(this.form.prisonerIds),this.form.grapplersIds=this.form.prisonerIds.reduce(function(e,t){var r=JSON.parse(t);return r.equipmentId&&e.push(r.equipmentId),e},[]),console.log(this.form.grapplersIds)},prevpage:function(e){this.getTaskData({areaId:this.areaId,pageNum:e-1,pageSize:10})},nextpage:function(e){this.getTaskData({areaId:this.areaId,pageNum:e+1,pageSize:10})},numPage:function(e){this.pageNum=e,this.getTaskData({areaId:this.areaId,pageNum:e,pageSize:10})},showAddForm:function(){this.formTitle="新增任务",this.isDetail=!1,this.dialogFormVisible=!0},submitAddTask:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){var a,s,i,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=21;break}if(a=t.form,s=a.task,i=a.route,n=a.policeIds,o=a.prisonerIds,t.form.areaId=t.areaId,t.form.name=s.name,t.form.type=s.type,t.form.routeId=i.id,t.form.routeName=i.name,t.form.prisonerIds=o.reduce(function(e,t){return e.push(JSON.parse(t)),e},[]),t.form.policeIds=n.reduce(function(e,t){return e.push(JSON.parse(t)),e},[]),console.log(t.form),"新增任务"!==t.formTitle){e.next=15;break}t.getAddTask(t.form),setTimeout(function(){t.dialogFormVisible=!1,t.$message.success("新增任务成功")}),e.next=19;break;case 15:return e.next=17,Object(c["m"])(t.form);case 17:t.getTaskData({areaId:t.areaId,pageNum:t.pageNum,pageSize:10}),setTimeout(function(){t.dialogFormVisible=!1,t.$message.success("编辑任务成功")});case 19:e.next=23;break;case 21:return setTimeout(function(){t.$message.error("操作失败")},300),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},openForm:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.areaId,e.next=3,Object(c["p"])(t);case 3:return this.carList=e.sent,e.next=6,Object(c["T"])(t);case 6:this.routeList=e.sent,"新增任务"==this.formTitle&&(this.oldWatchIds=[],this.oldHandsetIds=[],this.oldPoliceIds=[],this.oldPrisonerIds=[],this.oldGrapplersIds=[],this.isdisabled=!0);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openSelect:function(e){"policemanSelect"===e?(this.form.policeIds=this.oldPoliceIds,this.form.watchIds=this.oldWatchIds,this.form.handsetIds=this.oldHandsetIds):(this.form.prisonerIds=this.oldPrisonerIds,this.form.grapplersIds=this.oldGrapplersIds)},selectTime:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,a,s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isdisabled=!1,"新增任务"!=this.formTitle){e.next=23;break}return t=this.form,r=t.startTime,t.id,a=this.areaId,e.next=6,Object(c["W"])(r,a);case 6:return this.policeList=e.sent,e.next=9,Object(c["Y"])(r,a);case 9:return s=e.sent,this.watchList=s.slice(1),e.next=13,Object(c["V"])(r,a);case 13:return i=e.sent,this.handsetList=i.slice(1),e.next=17,Object(c["X"])(r,a);case 17:return this.prisonList=e.sent,e.next=20,Object(c["U"])(r,a);case 20:n=e.sent,console.log(n),this.footList=n.slice(1);case 23:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),defSelect:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a,s,i,n,o,l,u,d,p,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this[t]=!1,"policemanSelect"!==t){e.next=13;break}return r=this.form,a=r.policeIds,s=r.watchIds,i=r.handsetIds,n=a.reduce(function(e,t){return e.push(JSON.parse(t)),e},[]),e.next=6,Object(c["L"])(n,s,i);case 6:o=e.sent,this.form.police=o.data,this.oldWatchIds=s,this.oldHandsetIds=i,this.oldPoliceIds=a,e.next=21;break;case 13:return l=this.form,u=l.prisonerIds,d=l.grapplersIds,p=u.reduce(function(e,t){return e.push(JSON.parse(t)),e},[]),e.next=17,Object(c["N"])(p,d);case 17:m=e.sent,this.form.prisoner=m.data,this.oldPrisonerIds=u,this.oldGrapplersIds=d;case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),cancelSelect:function(e){this[e]=!1},clearForm:function(){this.form.task={},this.form.carIds=[],this.form.route={},this.form.startTime="",this.form.police="",this.form.prisoner="",this.form.describe="",this.form.grapplersIds=[],this.form.handsetIds=[],this.form.policeIds=[],this.form.prisonerIds=[],this.form.watchIds=[],this.form.name="",this.form.routeId=0,this.form.routeName="",this.form.type=""},closeForm:function(e){this.$refs[e].resetFields(),this.isdisabled=!1,this.clearForm()},backfill:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var a,s,i,n,o,l,u,d,p,m,f,h,b,g,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["E"])(r);case 2:a=e.sent,s=a.task,i=a.Police,n=s.carIds,o=s.startTime,l=s.police,u=s.prisoner,d=s.describe,p=s.watchIds,m=s.handsetIds,f=s.grapplersIds,h=s.name,b=s.type,g=s.routeName,k=s.routeId,this.form.id=r,this.form.carIds=n,this.form.startTime=o,this.form.police=l,this.form.prisoner=u,this.form.describe=d,this.oldPoliceIds=this.form.policeIds=i.reduce(function(e,t){return e.push(JSON.stringify(t)),e},[]),this.oldPrisonerIds=this.form.prisonerIds=a.prisoner.reduce(function(e,t){return e.push(JSON.stringify(t)),e},[]),this.oldWatchIds=this.form.watchIds=p,this.oldHandsetIds=this.form.handsetIds=m,this.oldGrapplersIds=this.form.grapplersIds=f,"form"==t&&(this.dialogFormVisible=!0,this.form.task={name:h,type:b},this.form.route={name:g,id:k});case 17:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var a,s,i,n,o,l,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.id,s=r.status,i=r.startTime,n=r.areaId,0===s){e.next=5;break}return e.abrupt("return");case 5:return this.formTitle="编辑任务",this.isdisabled=!1,this.backfill("form",a),e.next=10,Object(c["W"])(i,n,a);case 10:return this.policeList=e.sent,e.next=13,Object(c["Y"])(i,n,a);case 13:return o=e.sent,this.watchList=o.slice(1),e.next=17,Object(c["V"])(i,n,a);case 17:return l=e.sent,this.handsetList=l.slice(1),e.next=21,Object(c["X"])(i,n,a);case 21:return this.prisonList=e.sent,e.next=24,Object(c["U"])(i,n,a);case 24:u=e.sent,this.footList=u.slice(1);case 26:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),handleDetail:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["E"])(r.id);case 2:a=e.sent,this.detailForm=a.task,this.isDetail=!0;case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),startTask:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.multipleSelection.reduce(function(e,t){return 1==t.status&&e.push(t.id),e},[]),0!=t.length&&this.$messageBox.confirm("确定要开始任务么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.join(","),e.next=3,Object(c["Z"])(a);case 3:s=e.sent,s?(r.$message.success("已开始任务"),r.getTaskData({areaId:r.areaId,pageNum:r.pageNum,pageSize:10})):r.$message.error("网络有误");case 5:case"end":return e.stop()}},e)}))).catch(function(){r.$message({type:"info",message:"已取消开始任务"})});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),endTask:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.multipleSelection.reduce(function(e,t){return 3==t.status&&e.push(t.id),e},[]),0!=t.length&&this.$messageBox.confirm("确定要结束任务么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.join(","),e.next=3,Object(c["F"])(a);case 3:s=e.sent,s?(r.$message.success("已结束任务"),r.getTaskData({areaId:r.areaId,pageNum:r.pageNum,pageSize:10})):r.$message.error("网络有误");case 5:case"end":return e.stop()}},e)}))).catch(function(){r.$message({type:"info",message:"已取消结束任务"})});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteSelected:function(){var e=this,t=[];this.$store.state.multipleSelection.forEach(function(e){t.push(e.id)});var r=t.join();if(0===t.length)return!1;this.$messageBox.confirm("确定要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["C"])(r);case 2:a=t.sent,a&&(e.$message.success("删除成功"),e.getTaskData({areaId:e.areaId,pageNum:e.pageNum,pageSize:10}));case 4:case"end":return t.stop()}},t)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})}})},m=p,f=(r("a3fa"),r("2877")),h=Object(f["a"])(m,a,s,!1,null,null,null);t["default"]=h.exports},a3fa:function(e,t,r){"use strict";var a=r("cef5"),s=r.n(a);s.a},cef5:function(e,t,r){},dca4:function(e,t,r){}}]);